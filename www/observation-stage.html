<!DOCTYPE HTML>
<html>
<head>
<title>Observe</title>
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
	<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
	<script type="test/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
</head>

<body> 

<script type="text/javascript">
	
	//to denote what interval we are on
	var current_interval = 0;
	
	//to hold our javascript interval object
	var intervalHandle;
	
	//to hold our javascript interval timer object
	var timerHandle;
	
	//the amount of seconds elapsed
	var seconds = 0;
	
	//the amount of minutes elapsed
	var minutes = 0;
	
	$(function() { 
		$.mobile.changePage('#start-interval-dialog', {transition: 'pop', role: 'dialog'});
		
		
		
	});
	
	function startObservation() {
		//alert("!!!");
		intervalHandle = setInterval(_interval, 15000);
		timerHandle = setInterval(_timer, 1000);
		
		$("#start-observation-dialog").dialog('close');
		window.location.href="#";
	}
	
	function stopObservation() {
		clearInterval(intervalHandle);
		clearInterval(timerHandle);
	}
	
	function _interval() {
		$.mobile.changePage('#interval-behaviors-dialog', {transition: 'pop', role: 'dialog'});
		
	}
	
	function _timer() {
		//calculate elapsed time
		seconds += 1;
		//alert(seconds);
		var mins = 0;
		var secs = 0;
		var minsDisplay;
		var secsDisplay;
		
		mins = Math.floor(seconds/60);
		
		if(mins > 0) {
			minutes = mins;
			secs = seconds % 60;
		} else {
			secs = seconds % 60;	
		}
		
		//var mins_display = "";
		if(mins < 10) {
			minsDisplay = "0"+mins;
		} else {
			minsDisplay = mins;
		}
		
		//var secs_display = "";
		if(secs < 10) {
			secsDisplay = "0"+secs;
		} else {
			secsDisplay = secs;
		}
		
		
		
		var time_display = minsDisplay + ":"+secsDisplay;

		//display elapsed time
		$("#time").text(time_display);
	}
</script>
<div data-role="page">
	<div data-role="header">
		<h1>MST+</h1>
	</div><!-- /header -->

	<div data-role="content">		
		<br/>
		<br/>
		<br/>
		<h1 id="time">00:00</h1>
		<br/>
		<br/>
		<div data-role="controlgroup" data-type="horizontal">
			<button>VVE</button>
			<button>SVF</button>
			<button>EXT</button>
			<button>PRO</button>
			<button>SM</button>
			<button>EI</button>
			<button>CS</button>
			
			
		</div>
		<br />
		<br />
		<br />
		<button onclick=stopObservation()>DONE</button>
	
	
			
	</div><!-- /content -->

</div><!-- /page -->

<div data-role="page" id="start-interval-dialog">
	
	<div data-role="header">
		<h1>Start Observation</h1>
	</div>
	
	<div data-role="content">
		<button onclick=startObservation()>START OBSERVATION</button>
		<br />
		<br />
		<br />
		<div data-role="controlgroup" data-type="horizontal">
			<button>MO</button>
			<button>GP</button>
			<button>NP</button>
			<button>PB</button>
			<button>PLC</button>
			<button>FE</button>
			<button>ASB</button>
			<button>ALB</button>
			<button>TT</button>
			<button>ER</button>
			<button>RP</button>
			<button>PI</button>
			<button>MPS</button>
			
		</div>
	</div>
	
</div>

<div data-role="page" id="interval-behaviors-dialog">
	<div data-role="header">
		<h1>Interval Behaviors</h1>
	</div>
	
	<br />
	<br />
	<br />
	
		<div data-role="controlgroup" data-type="horizontal">
			<button>MO</button>
			<button>GP</button>
			<button>NP</button>
			<button>PB</button>
			<button>PLC</button>
			<button>FE</button>
			<button>ASB</button>
			<button>ALB</button>
			<button>TT</button>
			<button>ER</button>
			<button>RP</button>
			<button>PI</button>
			<button>MPS</button>
			
		</div>
	
	
</div>
</body>
</html>